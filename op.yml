name: slack-msg-chan
description: op to msg a slack channel
inputs:
  msg:
    string:
      constraints: { minLength: 1}
  channelName:
    string:
      constraints: { minLength: 1}
  apiToken:
    string:
      constraints: { minLength: 10 }
      isSecret: true
run:
  container:
    image: { ref: 'node:7.7' }
    cmd: 
      - sh
      - -ce
      - |
        echo "calling slack"
        /node_modules/slack-cli/bin/cmd.js -t "$(apiToken)" -h "$(channelName)" -m "$(msg)"
    dirs: { /node_modules }
